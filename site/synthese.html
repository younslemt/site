<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Votre Synth√®se ‚Äì Master Your Metrics</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background-color: #f4f6f8;
  margin: 0;
  color: #333;
}

header {
  background: linear-gradient(135deg, #001f3f, #003a70);
  color: white;
  text-align: center;
  padding: 70px 20px;
}

header h1 {
  font-size: 2.8em;
  margin-bottom: 10px;
}

header p {
  font-size: 1.2em;
  opacity: 0.95;
}

main {
  max-width: 950px;
  margin: 40px auto;
  padding: 0 20px;
}

.section {
  margin-bottom: 50px;
}

.card {
  background: white;
  border-radius: 12px;
  padding: 35px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}

.bar-block {
  margin-top: 18px;
}

.bar-label {
  font-weight: bold;
  margin-bottom: 8px;
}

.bar-bg {
  background: #ddd;
  border-radius: 30px;
  overflow: hidden;
  height: 28px;
}

.bar-fill {
  height: 28px;
  border-radius: 30px;
  text-align: right;
  padding-right: 12px;
  line-height: 28px;
  font-weight: bold;
  color: white;
  width: 0;
  transition: width 1.2s ease;
}

.score-global {
  text-align: center;
  font-size: 2em;
  margin: 25px 0;
}

.cta-section {
  text-align: center;
  background: linear-gradient(135deg, #0074D9, #005fa3);
  color: white;
  padding: 45px 25px;
  border-radius: 14px;
  margin: 70px 0;
}

.cta-button {
  display: inline-block;
  background-color: #28a745;
  color: white;
  padding: 16px 32px;
  font-size: 1.2em;
  border-radius: 8px;
  text-decoration: none;
  font-weight: bold;
  margin-top: 15px;
}

.temoignage {
  background: white;
  padding: 35px;
  border-left: 6px solid #0074D9;
  margin-top: 50px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

#contact-form {
  max-width: 650px;
  margin: 50px auto;
  background: white;
  padding: 35px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

#contact-form button {
  width: 100%;
  padding: 16px;
  margin-top: 15px;
  font-size: 1em;
  background-color: #0074D9;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

#contact-form button:hover {
  background-color: #005fa3;
}

.calendar-btn {
  display: block;
  width: 100%;
  text-align: center;
  margin-top: 14px;
  padding: 16px;
  font-size: 1em;
  background-color: #28a745;
  color: white;
  border-radius: 6px;
  text-decoration: none;
  font-weight: bold;
}

.calendar-btn:hover {
  background-color: #218838;
}

footer {
  text-align: center;
  padding: 30px;
  font-size: 0.9em;
  color: #666;
}
</style>

<script defer src="/_vercel/insights/script.js"></script>
<script defer src="https://vercel.com/insights/script.js"></script>
</head>

<body>

<header>
<h1>Votre diagnostic est termin√©</h1>
<p>Voici la synth√®se compl√®te de votre √©valuation.</p>
</header>

<main>

<div class="section card">
<h2>üìä Vos r√©sultats par domaine</h2>

<div id="generalScore" class="score-global"></div>

<div class="bar-block">
  <div class="bar-label">üå± ESG</div>
  <div class="bar-bg"><div id="barESG" class="bar-fill" style="background:#2ECC40"></div></div>
</div>

<div class="bar-block">
  <div class="bar-label">üíº AML</div>
  <div class="bar-bg"><div id="barAML" class="bar-fill" style="background:#FF851B"></div></div>
</div>

<div class="bar-block">
  <div class="bar-label">üíª Digitalisation</div>
  <div class="bar-bg"><div id="barDigital" class="bar-fill" style="background:#7FDBFF"></div></div>
</div>

<div class="bar-block">
  <div class="bar-label">üìä Cr√©dit</div>
  <div class="bar-bg"><div id="barCredit" class="bar-fill" style="background:#B10DC9"></div></div>
</div>

<div class="bar-block">
  <div class="bar-label">üîê Cybers√©curit√©</div>
  <div class="bar-bg"><div id="barCyber" class="bar-fill" style="background:#FF4136"></div></div>
</div>
</div>

<section id="contact-form">
  <h3>üì§ Partagez votre scorecard</h3>

  <p>
    Recevez une analyse personnalis√©e de vos r√©sultats et
    des recommandations concr√®tes adapt√©es √† votre situation.
  </p>

  <button onclick="sendReport()">
    üì® Envoyer ma scorecard
  </button>

  <p style="font-size:0.85em; color:#666; margin-top:12px;">
    ‚úîÔ∏è Envoi direct par e-mail &nbsp;‚Ä¢&nbsp; ‚úîÔ∏è Aucun engagement &nbsp;‚Ä¢&nbsp; ‚úîÔ∏è Analyse humaine
  </p>
</section>


<div class="cta-section">
<h2>Pr√™t √† passer √† l‚Äôaction ?</h2>
<p>Un √©change de 30 minutes suffit pour transformer ce diagnostic en plan concret.</p>
<a href="https://calendar.app.google/TWzExGsSew5rCkN77"
   target="_blank" rel="noopener"
   class="cta-button">
üìÖ Planifier mon entretien
</a>
</div>
<section class="section card" style="border-left:6px solid #0074D9;">
  <h2>üß≠ Et maintenant ?</h2>

  <p style="font-size:1.05em; line-height:1.6;">
    Votre diagnostic met en √©vidence des points forts,
    mais aussi des axes d‚Äôam√©lioration concrets.
    <strong>Nous vous accompagnons de mani√®re structur√©e,
    pragmatique et orient√©e r√©sultats.</strong>
  </p>

  <ul style="margin-top:20px; line-height:1.8;">
    <li>‚úîÔ∏è Analyse approfondie de vos scores et priorit√©s</li>
    <li>‚úîÔ∏è Sprints op√©rationnels (30 √† 90 jours)</li>
    <li>‚úîÔ∏è Mise en conformit√©, digitalisation, s√©curisation</li>
    <li>‚úîÔ∏è Valorisation aupr√®s banques, clients et partenaires</li>
  </ul>

  <a href="services.html"
     style="
       display:inline-block;
       margin-top:25px;
       padding:14px 28px;
       background:#0074D9;
       color:white;
       text-decoration:none;
       font-weight:bold;
       border-radius:8px;
     ">
    üîç D√©couvrir nos solutions et sprints
  </a>
</section>

<div class="temoignage">
<p>‚ÄúCe diagnostic a mis en lumi√®re des failles que nous n‚Äôavions jamais formalis√©es. L‚Äô√©change qui a suivi a √©t√© d√©cisif.‚Äù</p>
<strong>‚Äî Julie M., G√©rante de fiduciaire</strong>
</div>

</main>

<footer>
<a href="../index.html"
   style="display:inline-block;margin-top:20px;padding:12px 24px;background:#0074D9;color:white;text-decoration:none;border-radius:10px;font-weight:bold;">
Retour √† l'accueil
</a>

<p>¬© 2025 Master Your Metrics ‚Äî Tous droits r√©serv√©s</p>
</footer>

<script>
/* =========================
   1) R√âCUP SCORES
========================= */
const scores = {
  ESG: parseInt(localStorage.getItem('scoreESG')) || 0,
  AML: parseInt(localStorage.getItem('scoreAML')) || 0,
  Digital: parseInt(localStorage.getItem('scoreDigital')) || 0,
  Credit: parseInt(localStorage.getItem('scoreCredit')) || 0,
  Cyber: parseInt(localStorage.getItem('scoreCyber')) || 0
};

/* =========================
   2) AFFICHAGE BARRES
========================= */
function displayBar(id, value) {
  const el = document.getElementById(id);
  const safe = Math.max(0, Math.min(100, value));
  el.style.width = safe + "%";
  el.textContent = safe + " / 100";
}

displayBar("barESG", scores.ESG);
displayBar("barAML", scores.AML);
displayBar("barDigital", scores.Digital);
displayBar("barCredit", scores.Credit);
displayBar("barCyber", scores.Cyber);

/* =========================
   3) SCORE GLOBAL + √âTOILES
========================= */
const globalScore = Math.round(
  (scores.ESG + scores.AML + scores.Digital + scores.Credit + scores.Cyber) / 5
);

document.getElementById("generalScore").innerHTML =
  "‚≠ê".repeat(Math.round(globalScore / 20)) +
  "‚òÜ".repeat(5 - Math.round(globalScore / 20)) +
  `<div style="font-size:0.9em;margin-top:6px;">Score global : ${globalScore} / 100</div>`;

/* =========================
   4) R√âCUP R√âPONSES (JSON)
   cl√©s attendues :
   - answersESG
   - answersAML
   - answersDigital
   - answersCredit
   - answersCyber
========================= */
function safeParse(key) {
  try {
    const raw = localStorage.getItem(key);
    if (!raw) return [];
    const parsed = JSON.parse(raw);
    return Array.isArray(parsed) ? parsed : [];
  } catch (e) {
    return [];
  }
}

const answersByDomain = {
  ESG: safeParse("answersESG"),
  AML: safeParse("answersAML"),
  Digital: safeParse("answersDigital"),
  Credit: safeParse("answersCredit"),
  Cyber: safeParse("answersCyber")
};

function formatAnswers(domainName, items) {
  if (!items || items.length === 0) {
    return `\n${domainName} ‚Äî R√©ponses non disponibles (ancienne version du questionnaire).\n`;
  }
  let out = `\n${domainName} ‚Äî D√©tail des r√©ponses\n`;
  items.forEach((it, i) => {
    const q = (it.question || "").trim();
    const a = (it.answer || "").trim();
    out += `${i + 1}. ${q}\n   ‚Üí ${a}\n`;
  });
  return out;
}

/* =========================
   5) INTERPR√âTATION GLOBALE
========================= */
function interpretGlobal(score) {
  if (score < 30) return "üî¥ Fondations √† renforcer rapidement (priorit√©s + plan d‚Äôaction).";
  if (score < 70) return "üü† Niveau interm√©diaire (gains rapides possibles en 30 jours).";
  return "üü¢ Niveau solide (optimisation + valorisation aupr√®s clients/banques).";
}

/* =========================
   6) ENVOI MAIL (mailto)
   - inclut scores + r√©ponses
   - fallback si trop long
========================= */
function sendReport() {
  const recipient = "masteryourmetrics@gmail.com";
  const subject = "üß≠ Ma Scorecard ‚Äì Master Your Metrics";

  const header = `
Bonjour,

Voici ma scorecard Master Your Metrics :

üå± ESG : ${scores.ESG}/100
üíº AML : ${scores.AML}/100
üíª Digitalisation : ${scores.Digital}/100
üìä Cr√©dit : ${scores.Credit}/100
üîê Cybers√©curit√© : ${scores.Cyber}/100

‚≠ê Score global : ${globalScore}/100
${interpretGlobal(globalScore)}

üìÖ Prendre rendez-vous :
https://calendar.app.google/TWzExGsSew5rCkN77

`.trim();

  const details =
    formatAnswers("üå± ESG", answersByDomain.ESG) +
    formatAnswers("üíº AML", answersByDomain.AML) +
    formatAnswers("üíª Digitalisation", answersByDomain.Digital) +
    formatAnswers("üìä Cr√©dit", answersByDomain.Credit) +
    formatAnswers("üîê Cybers√©curit√©", answersByDomain.Cyber);

  const footer = `
‚Äî Envoy√© via Master Your Metrics
`.trim();

  // Corps complet souhait√©
  const fullBody = `${header}\n\n========================\nD√âTAIL DES R√âPONSES\n========================\n${details}\n${footer}`;

  // Fallback si trop long (certaines apps mail coupent > ~2000-4000 chars)
  const shortBody = `${header}\n\n(D√©tail des r√©ponses indisponible dans ce mail : limitation technique du client mail.)\n\n${footer}`;

  const tryOpen = (bodyText) => {
    const url =
      `mailto:${recipient}` +
      `?subject=${encodeURIComponent(subject)}` +
      `&body=${encodeURIComponent(bodyText)}`;
    window.location.href = url;
  };

  // Seuil prudent pour √©viter URL trop longue
  if (fullBody.length > 3500) {
    tryOpen(shortBody);
  } else {
    tryOpen(fullBody);
  }
}
</script>



</body>
</html>



